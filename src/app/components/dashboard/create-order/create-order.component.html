<div class="container">
  <h1>Trimite Colet</h1>
  <div class="form-wrapper">
    <div class="form-row">
      <div class="form-column" id="expeditorFormColumn">
        <app-order-form #expeditorForm title="Expeditor" (formValidityChange)="onExpeditorFormValidityChange($event)"></app-order-form>
      </div>
      <div class="form-column" id="destinatarFormColumn">
        <app-order-form #destinatarForm title="Destinatar" (formValidityChange)="onDestinatarFormValidityChange($event)"></app-order-form>
      </div>
      <div class="form-column package-section" id="packageSection">
        <app-package-overview id="packageOverview" [packages]="courierPackages"></app-package-overview>
        <div class="scrollable-content">
          <div class="toggle-plic">
            <label class="toggle-switch">
              <input type="checkbox" [(ngModel)]="isPlicSelected" (click)="togglePlic()">
              <span class="slider round"></span>
              <span class="label-text">Trimit Plic</span>
            </label>
          </div>
          <div *ngIf="isPlicSelected" class="plic-info">
            <p>Trimiți un singur plic de 250g cu documente.</p>
          </div>
          <div class="extra-services">
            <h3>Servicii Extra</h3>
            <div *ngFor="let service of filteredExtraServices" class="extra-service-item">
              <i [ngClass]="{'fas fa-check-square': selectedServices[service.value], 'far fa-square': !selectedServices[service.value]}"
                 (click)="toggleService(service.value)">
              </i>
              <label (click)="toggleService(service.value)">{{service.label}}</label>
              <div *ngIf="service.value === 'asigurare' && selectedServices[service.value]" class="extra-input">
                <input type="number" min="0" [(ngModel)]="asigurare" placeholder="Valoare asigurată" class="styled-input"/>
              </div>
              <div *ngIf="service.value === 'rambursCont' && selectedServices[service.value]" class="extra-input">
                <input type="number" min="0" [(ngModel)]="rambursCont" placeholder="Valoare ramburs în cont" class="styled-input"/>
              </div>
            </div>
          </div>
          <div *ngIf="!isPlicSelected">
            <div *ngFor="let courierPackage of courierPackages; let i = index" class="package-form">
              <app-package-form [index]="i" [packageForm]="courierPackage.form"
                                (remove)="removePackage(i)"
                                (weightChange)="onWeightChange()"
                                (validityChange)="onPackageValidityChange(i, $event)">
              </app-package-form>
            </div>
            <i class="fas fa-plus-circle add-icon" (click)="addPackage()"></i>
          </div>
        </div>
      </div>
    </div>
    <button pButton type="button" (click)="onSubmit()" [disabled]="!isFormValid()" class="arrow-button">
      <img src="assets/logo.png" alt="OK Curier Logo" class="button-logo">
      <span class="button-text">Cere oferta</span>
    </button>
  </div>
</div>
